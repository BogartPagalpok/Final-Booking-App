<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Illusive Admin | Elite Master</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,700;1,700&family=Plus+Jakarta+Sans:wght@300;400;800&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #d4af37; --bg: #050505; --glass: rgba(255,255,255,0.08); --border: rgba(212,175,55,0.5); --font-modegi: 'Cormorant Gramamond', serif; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body { background-color: var(--bg); color: #fff; font-family: 'Plus Jakarta Sans', sans-serif; margin: 0; height: 100vh; overflow: hidden; }
        .brand-modegi { font-family: var(--font-modegi); text-transform: uppercase; letter-spacing: 5px; font-weight: 700; font-style: italic; text-shadow: 0 0 15px rgba(212,175,55,0.3); }
        
        /* AUTHENTICATION SCREEN */
        .pin-dot { width: 14px; height: 14px; border: 2px solid var(--gold); border-radius: 50%; transition: 0.3s; }
        .pin-dot.active { background: var(--gold); box-shadow: 0 0 15px var(--gold); }
        .numpad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; width: 280px; margin: 0 auto; }
        .num-btn { background: var(--glass); border: 1px solid var(--border); border-radius: 50%; width: 75px; height: 75px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: var(--gold); cursor: pointer; font-family: var(--font-modegi); transition: 0.2s; }
        .num-btn:active { background: var(--gold); color: #000; transform: scale(0.9); }

        .screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: 0.8s cubic-bezier(0.4, 0, 0.2, 1); z-index: 10; }
        .hidden { opacity: 0; pointer-events: none; transform: translateY(-40px); }

        /* DASHBOARD INTERFACE */
        .list-container { width: 100%; overflow-y: auto; padding: 100px 20px; height: 100vh; scroll-behavior: smooth; }
        .client-card { background: var(--glass); border: 1px solid var(--border); border-radius: 25px; padding: 22px; margin-bottom: 15px; text-align: left; animation: slideUp 0.5s ease forwards; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .admin-nav { position: fixed; bottom: 0; width: 100%; background: rgba(0,0,0,0.9); border-top: 1px solid var(--border); display: flex; justify-content: space-around; padding: 20px; backdrop-filter: blur(15px); z-index: 100; }
        .tab-btn { color: #444; font-size: 10px; font-weight: 800; text-transform: uppercase; cursor: pointer; border: none; background: none; transition: 0.3s; }
        .tab-btn.active { color: var(--gold); text-shadow: 0 0 10px var(--gold); }
    </style>
</head>
<body>

    <section id="scr-gate" class="screen">
        <h1 class="brand-modegi" style="font-size: 2.2rem; margin-bottom: 5px;">SECURE</h1>
        <p style="font-size: 9px; letter-spacing: 4px; color: #555; margin-bottom: 40px;">EST. 2022 ADMIN</p>
        <div class="pin-display" style="display:flex; gap:20px; margin-bottom:40px;">
            <div class="pin-dot" id="dot-0"></div><div class="pin-dot" id="dot-1"></div>
            <div class="pin-dot" id="dot-2"></div><div class="pin-dot" id="dot-3"></div>
        </div>
        <div class="numpad">
            <div class="num-btn" onclick="tap('1')">1</div><div class="num-btn" onclick="tap('2')">2</div><div class="num-btn" onclick="tap('3')">3</div>
            <div class="num-btn" onclick="tap('4')">4</div><div class="num-btn" onclick="tap('5')">5</div><div class="num-btn" onclick="tap('6')">6</div>
            <div class="num-btn" onclick="tap('7')">7</div><div class="num-btn" onclick="tap('8')">8</div><div class="num-btn" onclick="tap('9')">9</div>
            <div></div><div class="num-btn" onclick="tap('0')">0</div><div class="num-btn" style="font-size:10px; border:none" onclick="clr()">CLR</div>
        </div>
    </section>

    <section id="scr-dash" class="screen hidden" style="background:#000; justify-content:flex-start;">
        <nav style="position:fixed; top:0; width:100%; padding:20px; text-align:center; border-bottom:1px solid var(--border); background:rgba(0,0,0,0.8); z-index:110; backdrop-filter:blur(10px);">
            <div class="brand-modegi" id="header-title">BOOKINGS</div>
        </nav>
        
        <div id="tab-calendar" class="list-container"><div id="cal-list"></div></div>
        <div id="tab-clients" class="list-container" style="display:none;"><div id="client-list"></div></div>
        
        <div class="admin-nav">
            <button class="tab-btn active" onclick="tab('calendar', event)">Bookings</button>
            <button class="tab-btn" onclick="tab('clients', event)">Client Index</button>
        </div>
    </section>

    <script>
        const PIN = "1029";
        const URL = "https://script.google.com/macros/s/AKfycbwk0-zhFwz2qUMJyQZFS6qQqGAMvBkj5O-IjTLfrEunKuRhYiW5a5uIF7tXjgKNWxdt/exec";
        let pin = "";

        function tap(n) { if(pin.length < 4) { pin += n; updateDots(); if(pin.length === 4) verify(); } }
        function clr() { pin = ""; updateDots(); }
        function updateDots() { for(let i=0; i<4; i++) document.getElementById('dot-'+i).classList.toggle('active', i < pin.length); }
        
        function verify() { 
            if(pin === PIN) { 
                document.getElementById('scr-gate').classList.add('hidden'); 
                document.getElementById('scr-dash').classList.remove('hidden'); 
                fetchData(); 
            } else { 
                setTimeout(clr, 500); 
            } 
        }

        async function fetchData() {
            try {
                // We add ?action=read to tell the script we want to see the list
                const res = await fetch(URL + "?action=read");
                const data = await res.json();
                if(data.error) throw new Error(data.error);
                render(data);
            } catch (e) { 
                document.getElementById('cal-list').innerHTML = `<p style="opacity:0.3; margin-top:50px; text-align:center; font-size:12px;">Syncing Error: ${e.message}</p>`; 
            }
        }

        function tab(t, e) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('tab-calendar').style.display = (t === 'calendar') ? 'block' : 'none';
            document.getElementById('tab-clients').style.display = (t === 'clients') ? 'block' : 'none';
            e.target.classList.add('active');
            document.getElementById('header-title').innerText = t === 'calendar' ? 'BOOKINGS' : 'CLIENT INDEX';
        }

        function render(data) {
            const sortedData = [...data].reverse();
            
            // Render Bookings Tab
            document.getElementById('cal-list').innerHTML = sortedData.map(b => `
                <div class="client-card">
                    <div style="color:var(--gold); font-weight:800; font-size:10px; margin-bottom:5px; letter-spacing:1px;">SESSION: ${b.date}</div>
                    <div style="font-family:var(--font-modegi); font-size:1.4rem; letter-spacing:1px; margin-bottom:5px;">${b.name}</div>
                    <div style="font-size:9px; opacity:0.4; text-transform:uppercase; letter-spacing:2px;">Concept: ${b.style}</div>
                </div>
            `).join('');

            // Render Client Index Tab
            document.getElementById('client-list').innerHTML = sortedData.map(b => `
                <div class="client-card" style="border-style:dashed; opacity:0.8;">
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <span class="brand-modegi" style="font-size:1.1rem;">${b.name}</span>
                        <span style="font-size:9px; color:var(--gold); font-weight:800; letter-spacing:1px;">VERIFIED CLIENT</span>
                    </div>
                </div>
            `).join('');
        }
    </script>
</body>
</html>
